<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Select dates and times</title>
    <script src="https://telegram.org/js/telegram-web-app.js?56"></script>
</head>
<body style="background-color: #ffffff">
    <form action="https://echo.free.beeceptor.com" id="sendDateTimeRange">
    <label for="date-time-range-start">Select start date and time:</label>
    <input
        type="datetime-local"
        id="date-time-range-start"
        name="date-time-range-start"
        value="2025-04-01T00:00"
        min="2025-04-01T00:00"
        max="2025-04-01T23:59" />
    <br>

    <label for="date-time-range-end">Select end date and time:</label>
    <input
        type="datetime-local"
        id="date-time-range-end"
        name="date-time-range-end"
        value="2025-04-01T00:00"
        min="2025-04-01T00:00"
        max="2025-04-01T23:59" />
    <br>
    <input type="submit">
    </form>

    <script type="text/javascript">       
        dateTimeControlRangStart = document.getElementById("date-time-range-start");
        dateTimeControlRangeEnd = document.getElementById("date-time-range-end");
        const dateNow = new Date();
        dateTimeControlRangStart.max = dateNow.toISOString().substring(0, 16);
        dateTimeControlRangeEnd.max = dateNow.toISOString().substring(0, 16);
        dateTimeControlRangeEnd.value = dateNow.toISOString().substring(0, 16);
        defaultDate = new Date();
        defaultDate.setTime(dateNow.getTime() - 2 * 3600 * 1000)
        dateTimeControlRangStart.value = defaultDate.toISOString().substring(0, 16);

        function formSubmit(event)
        {
            event.preventDefault(); // prevent the form from submitting
            const data =  JSON.stringify({ start: document.getElementById("date-time-range-start").value,
                                           end: document.getElementById("date-time-range-end");.value})
            Telegram.WebApp.sendData(data);
            Telegram.WebApp.close();
        }
        formElement = document.getElementById('sendDateTimeRange');
        formElement.addEventListener("submit", formSubmit);
        Telegram.WebApp.ready();
        
        Telegram.WebApp.MainButton.setText('xyxy boom').show().onClick(function () {
            const data =  JSON.stringify({ start: document.getElementById("date-time-range-start").value,
                                           end: document.getElementById("date-time-range-end");.value})
            Telegram.WebApp.sendData(data);
            Telegram.WebApp.close();
        });
    </script>
</body>
<script type="text/javascript">
    Telegram.WebApp.expand();
</script>
</html>
